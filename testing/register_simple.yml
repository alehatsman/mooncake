---
- name: Get current user
  shell: whoami
  register: current_user

- name: Show user
  shell: echo "Current user is {{ current_user.stdout }}"

- name: Get user home
  shell: echo $HOME
  register: user_home

- name: Show home
  shell: echo "Home is {{ user_home.stdout }}"

- name: Check if git exists
  shell: which git
  register: git_check

- name: Show git location
  shell: echo "Git found at {{ git_check.stdout }}"
  when: git_check.rc == 0

- name: Create test file
  file:
    path: /tmp/mooncake_test.txt
    state: file
    content: "Hello from mooncake"
  register: file_result

- name: Show if file changed
  shell: echo "File changed was {{ file_result.changed }}"

- name: Update file again (should not change)
  file:
    path: /tmp/mooncake_test.txt
    state: file
    content: "Hello from mooncake"
  register: file_result2

- name: Show second result
  shell: echo "Second run changed was {{ file_result2.changed }}"
