- name: Create test directory for loop tests
  file:
    path: /tmp/mooncake-loop-test
    state: directory

- name: Create multiple files using loop
  file:
    path: /tmp/mooncake-loop-test/file-{{ item }}.txt
    state: touch
  loop:
    - 1
    - 2
    - 3

- name: Verify first file
  shell: test -f /tmp/mooncake-loop-test/file-1.txt

- name: Verify second file
  shell: test -f /tmp/mooncake-loop-test/file-2.txt

- name: Verify third file
  shell: test -f /tmp/mooncake-loop-test/file-3.txt

- name: Count files created
  shell: ls /tmp/mooncake-loop-test | wc -l
  register: file_count

- name: Clean up
  file:
    path: /tmp/mooncake-loop-test
    state: absent
