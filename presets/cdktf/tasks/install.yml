- name: Check if cdktf is installed
  shell: command -v cdktf
  register: cdktf_check
  failed_when: false

- name: Install cdktf via npm
  shell: npm install -g cdktf-cli
  when: cdktf_check.rc != 0

- name: Verify installation with assert
  assert:
    command:
      cmd: command -v cdktf
      exit_code: 0

- name: Display confirmation
  print: "cdktf installed"
