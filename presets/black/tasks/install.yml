- name: Check if black is installed
  shell: command -v black
  register: black_check
  failed_when: false

- name: Install black via Homebrew
  package:
    name: black
    state: present
  when: brew_available and black_check.rc != 0

- name: Install black via pip3
  shell: pip3 install black
  when: not brew_available and black_check.rc != 0

- name: Verify installation with assert
  assert:
    command:
      cmd: command -v black
      exit_code: 0

- name: Display confirmation
  print: "black installed"
