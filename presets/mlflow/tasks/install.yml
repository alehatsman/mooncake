- name: Check if mlflow is installed
  shell: command -v mlflow
  register: mlflow_check
  failed_when: false

- name: Install mlflow via pip3 on Linux
  shell: pip3 install mlflow
  when: (apt_available or dnf_available or yum_available) and mlflow_check.rc != 0

- name: Install mlflow via pip3 on macOS
  shell: pip3 install mlflow
  when: brew_available and mlflow_check.rc != 0

- name: Verify mlflow is installed
  assert:
    command:
      cmd: command -v mlflow
      exit_code: 0
