- name: Check if pinecone is installed
  shell: command -v pinecone
  register: pinecone_check
  failed_when: false

- name: Install pinecone via pip3
  shell: pip3 install --user pinecone-client
  when: pinecone_check.rc != 0

- name: Verify installation with assert
  assert:
    command:
      cmd: python3 -c "import pinecone; print('ok')"
      exit_code: 0

- name: Display confirmation
  print: "pinecone client installed"
