# Modern Unix Tools Installation

- name: Install {{ item }} via {{ package_manager }}
  package:
    name: "{{ item }}"
    state: present
  with_items: parameters.tools
  become: true
  when: package_manager != "brew" and parameters.state == "present"

- name: Install {{ item }} via {{ package_manager }}
  package:
    name: "{{ item }}"
    state: present
  with_items: parameters.tools
  when: package_manager == "brew" and parameters.state == "present"

- name: Remove {{ item }} via {{ package_manager }}
  package:
    name: "{{ item }}"
    state: absent
  with_items: parameters.tools
  become: true
  when: package_manager != "brew" and parameters.state == "absent"

- name: Remove {{ item }} via {{ package_manager }}
  package:
    name: "{{ item }}"
    state: absent
  with_items: parameters.tools
  when: package_manager == "brew" and parameters.state == "absent"

- name: Print installation complete message
  print: |
    Modern Unix tools installed! Try these commands:
      bat file.txt          # Pretty cat
      rg pattern           # Fast grep
      fd pattern           # Fast find
      exa -la              # Better ls
      z directory          # Smart cd (after first use)
      dust                 # Disk usage
      duf                  # Disk free
      btm                  # System monitor
  when: parameters.state == "present"
