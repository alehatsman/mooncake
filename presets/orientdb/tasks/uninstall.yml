- name: Uninstall orientdb via Homebrew (macOS)
  package:
    name: orientdb
    state: absent
  when: (parameters.state == "absent") and (os == "darwin")
  failed_when: false

- name: Remove orientdb directory (Linux)
  file:
    path: ~/orientdb
    state: absent
  when: (parameters.state == "absent") and (os == "linux")
  failed_when: false

- name: Display confirmation
  print: "orientdb uninstalled"
  when: parameters.state == "absent"

- name: Assert tool is removed (Linux)
  assert:
    file:
      path: ~/orientdb
      exists: false
  when: (parameters.state == "absent") and (os == "linux")

- name: Assert tool is removed (macOS)
  assert:
    command:
      cmd: command -v orientdb || test -d /opt/homebrew/opt/orientdb || test -d /usr/local/opt/orientdb
      exit_code: 1
  when: (parameters.state == "absent") and (os == "darwin")
