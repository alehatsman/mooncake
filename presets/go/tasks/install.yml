# Go Installation Tasks

- name: Check if Go is already installed
  shell: command -v go
  register: go_check
  failed_when: false

# macOS Installation
- name: Install Go via Homebrew (macOS)
  package:
    name: go
    state: present
  when: brew_available and go_check.rc != 0

# Linux - via package manager
- name: Install Go (Debian/Ubuntu)
  package:
    name: golang-go
    state: present
  become: true
  when: apt_available and go_check.rc != 0

- name: Install Go (Fedora/RHEL)
  package:
    name: golang
    state: present
  become: true
  when: dnf_available and go_check.rc != 0

- name: Install Go (Arch)
  package:
    name: go
    state: present
  become: true
  when: pacman_available and go_check.rc != 0

# Verify installation
- name: Verify installation with assert
  assert:
    command:
      cmd: command -v go
      exit_code: 0

- name: Display confirmation
  print: "Go installed"
