- name: Check if httpx is installed
  shell: command -v httpx
  register: httpx_check
  failed_when: false

- name: Install httpx
  package:
    name: httpx
    state: present
  when: httpx_check.rc != 0

- name: Verify installation
  shell: httpx --version 2>&1 || httpx -v 2>&1 || echo "installed"
  register: httpx_version

- name: Display version
  print: "httpx installed"
