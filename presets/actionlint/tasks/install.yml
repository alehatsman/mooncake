- name: Check if actionlint is installed
  shell: command -v actionlint
  register: actionlint_check
  failed_when: false

- name: Install actionlint via Homebrew
  package:
    name: actionlint
    state: present
  when: brew_available and actionlint_check.rc != 0

- name: Install actionlint via install script
  shell: |
    bash <(curl -fsSL https://raw.githubusercontent.com/rhysd/actionlint/main/scripts/download-actionlint.bash)
    sudo mv actionlint /usr/local/bin/
    sudo chmod +x /usr/local/bin/actionlint
  when: (apt_available or dnf_available or yum_available or pacman_available or zypper_available or apk_available) and actionlint_check.rc != 0

- name: Verify installation with assert
  assert:
    command:
      cmd: command -v actionlint
      exit_code: 0

- name: Display confirmation
  print: "actionlint installed"
