-- Neovim Configuration
-- Generated by Mooncake
-- Editor: {{ editor }}
-- Color scheme: {{ color_scheme }}

-- Basic settings
vim.opt.number = true
vim.opt.relativenumber = true
vim.opt.expandtab = true
vim.opt.tabstop = 2
vim.opt.shiftwidth = 2
vim.opt.smartindent = true
vim.opt.wrap = false
vim.opt.swapfile = false
vim.opt.backup = false
vim.opt.hlsearch = false
vim.opt.incsearch = true
vim.opt.termguicolors = true
vim.opt.scrolloff = 8
vim.opt.updatetime = 50

-- Leader key
vim.g.mapleader = " "

-- Color scheme
{% if color_scheme == "gruvbox" %}
vim.cmd([[colorscheme gruvbox]])
vim.opt.background = "dark"
{% elif color_scheme == "nord" %}
vim.cmd([[colorscheme nord]])
{% else %}
vim.cmd([[colorscheme default]])
{% endif %}

-- Key mappings
vim.keymap.set("n", "<leader>pv", vim.cmd.Ex)
vim.keymap.set("n", "<C-d>", "<C-d>zz")
vim.keymap.set("n", "<C-u>", "<C-u>zz")
vim.keymap.set("n", "n", "nzzzv")
vim.keymap.set("n", "N", "Nzzzv")

-- System clipboard
vim.keymap.set({"n", "v"}, "<leader>y", [["+y]])
vim.keymap.set("n", "<leader>Y", [["+Y]])

-- Language-specific settings
{% if use_python %}
vim.api.nvim_create_autocmd("FileType", {
  pattern = "python",
  callback = function()
    vim.opt_local.tabstop = 4
    vim.opt_local.shiftwidth = 4
  end,
})
{% endif %}

{% if use_nodejs %}
vim.api.nvim_create_autocmd("FileType", {
  pattern = {"javascript", "typescript", "json"},
  callback = function()
    vim.opt_local.tabstop = 2
    vim.opt_local.shiftwidth = 2
  end,
})
{% endif %}

-- Auto commands
vim.api.nvim_create_autocmd("BufWritePre", {
  pattern = "*",
  callback = function()
    vim.cmd([[%s/\s\+$//e]])
  end,
})
